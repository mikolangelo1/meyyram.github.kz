document.addEventListener('DOMContentLoaded',function(){const form=document.getElementById('loginForm');const usernameInput=document.getElementById('username');const passwordInput=document.getElementById('password');const usernameError=document.getElementById('usernameError');const passwordError=document.getElementById('passwordError');const togglePassword=document.querySelector('.toggle-password');const usernameRegex=/^[a-zA-Z0-9_-]{3,16}$/;const forbiddenChars=/[!@#$%^&*()+={}\[\]|\\:;"'<>,.?/~`]/;const consecutiveSymbols=/(.)\1{2,}/;const commonUsernames=['admin','root','user','test','guest'];togglePassword.addEventListener('click',function(){const type=passwordInput.type==='password'?'text':'password';passwordInput.type=type;this.querySelector('.icon').innerHTML=type==='password'?'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>':'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l18 18"/>'});usernameInput.addEventListener('input',validateUsername);passwordInput.addEventListener('input',validatePassword);function validateUsername(){const username=usernameInput.value.trim();let error='';if(!username){error='Введите имя пользователя'}else if(username.length<3){error='Минимальная длина - 3 символа'}else if(username.length>16){error='Максимальная длина - 16 символов'}else if(!usernameRegex.test(username)){error='Используйте только буквы, цифры, дефис и подчёркивание'}else if(forbiddenChars.test(username)){error='Имя содержит недопустимые символы'}else if(consecutiveSymbols.test(username)){error='Слишком много повторяющихся символов'}else if(commonUsernames.includes(username.toLowerCase())){error='Это имя пользователя недоступно'}usernameError.textContent=error;usernameInput.classList.toggle('error',!!error);return!error}function validatePassword(){const password=passwordInput.value;let error='';if(!password){error='Введите пароль'}else if(password.length<8){error='Минимальная длина пароля - 8 символов'}else if(!/[A-Z]/.test(password)){error='Добавьте хотя бы одну заглавную букву'}else if(!/[a-z]/.test(password)){error='Добавьте хотя бы одну строчную букву'}else if(!/[0-9]/.test(password)){error='Добавьте хотя бы одну цифру'}else if(!/[!@#$%^&*]/.test(password)){error='Добавьте хотя бы один специальный символ (!@#$%^&*)'}else if(/(.)\1{2,}/.test(password)){error='Слишком много повторяющихся символов'}passwordError.textContent=error;passwordInput.classList.toggle('error',!!error);return!error}form.addEventListener('submit',function(e){e.preventDefault();const isUsernameValid=validateUsername();const isPasswordValid=validatePassword();if(!isUsernameValid||!isPasswordValid){const invalidInput=!isUsernameValid?usernameInput:passwordInput;invalidInput.classList.add('error');invalidInput.focus();return}console.log('Форма отправлена',{username:usernameInput.value,password:passwordInput.value,remember:document.getElementById('remember').checked});const button=form.querySelector('button[type="submit"]');button.disabled=true;button.innerHTML=`<svg class="animate-spin h-5 w-5"viewBox="0 0 24 24"><circle class="opacity-25"cx="12"cy="12"r="10"stroke="currentColor"stroke-width="4"fill="none"/><path class="opacity-75"fill="currentColor"d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/></svg><span>Вход...</span>`;setTimeout(()=>{window.location.href='/dashboard'},1500)})});